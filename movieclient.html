<!DOCTYPE html>
<html>
<head>
    <title>Movie Database</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
</head>

<body>

    <div class="inputs">
        <br><br>
        <button type="button" v-on:click="send_create()">Create Database</button>
        <button type="button" v-on:click="send_delete()">Delete Database</button>
        <!-- <br><br><br><br><br>
        <span>Year:</span>
        <br>
        <input v-model="year">
        <br><br>
        <span>Title:</span>
        <br>
        <input v-model="title">
        <br><br>
        <button type="button" v-on:click="send_query()">Query Database</button> -->
        <br><br><br><br><br><br>
        <input type="hidden" ref="results_ref">
        <span v-if="show">{{response}}</span>
        <br><br><br>
    </div>

    <script>
    
    var send_request = new Vue({
        el: ".inputs",
        data: {
            show: false,
            response: ''
        },
        methods: {
            async send_create() {
                let url = 'http://localhost:8080/create'

                var requestOptions = {
                    method: 'GET',
                    redirect: 'follow',
                };

                console.log("Telling server to create database.");

                let prom = fetch(url, requestOptions)
                    .then(response => {
                        console.log(response);
                        send_request.response = String(response);
                    })
                    .catch(error => console.log('error', error));

                // send_request.response = prom.response;
                send_request.show = true;               //add code to change this back to false after 5 sec
            },
            async send_delete() {
                let url = 'http://localhost:8080/delete'

                var requestOptions = {
                    method: 'GET',
                    redirect: 'follow',
                };

                console.log("Telling server to delete database.");

                let prom = fetch(url, requestOptions)
                    .then(response => {
                        console.log(reponse);
                        send_request.response = String(response);
                    })
                    .catch(error => console.log('error', error));

                // send_request.response = prom.response;
                send_request.show = true;               //add code to change this back to false after 5 sec
            }
        }
    });

    </script>
</body>

</html>